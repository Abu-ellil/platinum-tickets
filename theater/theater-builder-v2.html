<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theater Section Builder - ููุดุฆ ุฃูุณุงู ุงููุณุฑุญ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">๐ญ</div>
            <span>ููุดุฆ ุฃูุณุงู ุงููุณุฑุญ</span>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="clearAll()">๐๏ธ ูุณุญ</button>
            <button class="btn btn-secondary" onclick="exportData()">๐ฅ ุชุตุฏูุฑ JSON</button>
            <button class="btn btn-secondary" onclick="exportTsx()">โ๏ธ ุชุตุฏูุฑ TSX</button>
            <button class="btn btn-primary" onclick="previewTheater()">๐๏ธ ูุนุงููุฉ</button>
        </div>
    </header>

    <div class="main-container">
        <aside class="sidebar">
            <!-- Add/Edit Section -->
            <div class="sidebar-section">
                <h3 class="sidebar-title" id="sectionFormTitle">โ ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ</h3>

                <div class="form-group">
                    <label class="form-label">ุงุณู ุงููุณู</label>
                    <input type="text" class="form-input" id="sectionName" placeholder="VIP, Platinum...">
                </div>

                <div class="form-group">
                    <label class="form-label">ูุฆุฉ ุงูุณุนุฑ (ุฅุนุฏุงุฏ ูุณุจู)</label>
                    <div class="category-presets" id="categoryPresets">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ููู ุงููุณู</label>
                        <div class="color-picker-wrapper">
                            <input type="color" class="color-picker" id="sectionColor" value="#e57373"
                                oninput="updatePreview()">
                            <input type="text" class="form-input" id="sectionColorText" value="#e57373" style="flex:1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ุงูุณุนุฑ</label>
                        <input type="number" class="form-input" id="sectionPrice" placeholder="0.00">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ุตู ุงููููุน (ูููุถุน ุงููุชุฌุงูุฑ)</label>
                    <input type="number" class="form-input" id="sectionRowIndex" value="0" min="0"
                        placeholder="0 = ุตู ุฌุฏูุฏ">
                    <small style="color:rgba(255,255,255,0.4);font-size:10px">ููุณ ุงูุฑูู = ููุณ ุงูุตู (ูุชุฌุงูุฑ)</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ุงูุญูุงุก: <span id="curveVal">0</span>%</label>
                        <input type="range" id="sectionCurve" min="-1000" max="1000" value="0"
                            oninput="updateCurvePreview()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ูููุงู: <span id="skewVal">0</span>ยฐ</label>
                        <input type="range" id="sectionSkew" min="-100" max="100" value="0"
                            oninput="updateSkewPreview()">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ุญุฌู ุงูููุนุฏ: <span id="seatSizeVal">18</span>px</label>
                        <input type="range" id="sectionSeatSize" min="12" max="40" value="18"
                            oninput="updateSeatSizePreview()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ุงููุณุงูุฉ ุฃูููุฉ: <span id="seatGapVal">2</span>px</label>
                        <input type="range" id="sectionSeatGap" min="0" max="10" value="2"
                            oninput="updateSeatGapPreview()">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ุงููุณุงูุฉ ุนููุฏูุฉ (ุตููู): <span id="rowGapVal">4</span>px</label>
                    <input type="range" id="sectionRowGap" min="0" max="50" value="4" oninput="updateRowGapPreview()">
                </div>

                <div class="form-group">
                    <label class="form-label">ุชุฏููุฑ ุงููุณู: <span id="rotateVal">0</span>ยฐ</label>
                    <input type="range" id="sectionRotation" min="-45" max="45" value="0" step="1"
                        oninput="updateRotationPreview()">
                </div>

                <div class="form-group">
                    <label class="form-label" style="display:flex;align-items:center;gap:8px;cursor:pointer">
                        <input type="checkbox" id="sectionBorder" checked>
                        ุฅุธูุงุฑ ุงูุญุฏูุฏ (Border)
                    </label>
                </div>

                <!-- Live Preview -->
                <div class="preview-box">
                    <div class="preview-section" id="livePreview">
                        <div class="preview-row" id="previewRow1">
                            <div class="preview-seat"></div>
                            <div class="preview-seat"></div>
                            <div class="preview-seat"></div>
                        </div>
                        <div class="preview-row" id="previewRow2">
                            <div class="preview-seat"></div>
                            <div class="preview-seat"></div>
                            <div class="preview-seat"></div>
                            <div class="preview-seat"></div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <button class="btn btn-primary" style="flex:1" onclick="saveSection()" id="saveSectionBtn">โ
                        ุฅุถุงูุฉ</button>
                    <button class="btn btn-secondary" style="flex:1;display:none" onclick="cancelEdit()"
                        id="cancelEditBtn">โ ุฅูุบุงุก</button>
                </div>
            </div>

            <!-- Sections List -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">ุงูุฃูุณุงู (<span id="sectionCount">0</span>)</h3>
                <div class="section-list" id="sectionList">
                    <div class="empty-state" style="padding:15px">
                        <p style="font-size:11px">ูุง ุชูุฌุฏ ุฃูุณุงู</p>
                    </div>
                </div>
            </div>

            <!-- Add Rows to Selected Section -->
            <div class="sidebar-section" id="rowsSection" style="display:none">
                <h3 class="sidebar-title">ุฅุถุงูุฉ ุตููู ูููุณู: <span id="selectedSectionName"></span></h3>
                <div class="form-row-3">
                    <div class="form-group">
                        <label class="form-label">ุงูุตู</label>
                        <input type="text" class="form-input" id="rowName" placeholder="A">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ุงูููุงุนุฏ</label>
                        <input type="number" class="form-input" id="rowSeats" value="10" min="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ุงูููุฑุงุช</label>
                        <input type="number" class="form-input" id="rowAisles" value="0" min="0" max="5">
                    </div>
                </div>
                <button class="btn btn-primary btn-sm" style="width:100%" onclick="addRow()">โ ุฅุถุงูุฉ ุตู</button>

                <div id="rowsList" style="margin-top:10px"></div>
            </div>
        </aside>

        <div class="canvas-area">
            <input type="text" class="theater-name" placeholder="ุงุณู ุงููุณุฑุญ" id="theaterName">
            <input type="file" id="bgImageInput" accept="image/*" style="display:none" onchange="handleBgUpload(event)">

            <div class="toolbar">
                <button class="tool-btn active" id="selectTool" onclick="setTool('select')">๐ ุชุญุฏูุฏ</button>
                <button class="tool-btn" id="skipTool" onclick="setTool('skip')">โ ุชุฎุทู</button>
                <button class="tool-btn" id="pinTool" onclick="setTool('pin')">๐ ุชุซุจูุช</button>
                <div style="width:1px;background:rgba(255,255,255,0.2);margin:0 5px"></div>
                <button class="tool-btn" onclick="triggerBgUpload()" title="ุชุบููุฑ ุงูุฎูููุฉ">๐ผ๏ธ ุฎูููุฉ</button>
                <button class="tool-btn" onclick="clearBackground()" title="ูุณุญ ุงูุฎูููุฉ">โ</button>
                <div style="width:1px;background:rgba(255,255,255,0.2);margin:0 5px"></div>
                <button class="tool-btn" onclick="undo()" id="undoBtn" title="ุชุฑุงุฌุน (Ctrl+Z)" disabled>โฉ๏ธ</button>
                <button class="tool-btn" onclick="redo()" id="redoBtn" title="ุฅุนุงุฏุฉ (Ctrl+Y)" disabled>โช๏ธ</button>
                <div style="width:1px;background:rgba(255,255,255,0.2);margin:0 5px"></div>
                <button class="tool-btn" onclick="changeZoom(-0.1)">โ</button>
                <button class="tool-btn" onclick="changeZoom(0.1)">โ</button>
                <button class="tool-btn" onclick="resetZoom()" title="Reset Zoom">๐</button>
            </div>

            <div class="stage">
                <span class="stage-text">ุงููุณุฑุญ</span>
            </div>

            <div class="theater-layout" id="theaterLayout">
                <div class="empty-state">
                    <div class="empty-state-icon">๐ญ</div>
                    <p>ุงุจุฏุฃ ุจุฅุถุงูุฉ ุฃูุณุงู</p>
                </div>
            </div>

            <div class="stats-bar" id="statsBar" style="display:none">
                <div class="stat-item">
                    <div class="stat-value" id="totalSeats">0</div>
                    <div class="stat-label">ุงูููุงุนุฏ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalSections">0</div>
                    <div class="stat-label">ุงูุฃูุณุงู</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalRows">0</div>
                    <div class="stat-label">ุงูุตููู</div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>